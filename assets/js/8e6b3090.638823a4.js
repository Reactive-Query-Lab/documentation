"use strict";(globalThis.webpackChunkreactive_query_doc=globalThis.webpackChunkreactive_query_doc||[]).push([[476],{2056:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>i,contentTitle:()=>d,default:()=>l,frontMatter:()=>s,metadata:()=>t,toc:()=>m});const t=JSON.parse('{"id":"2-command-model","title":"Command Model","description":"A framework-agnostic MVVM Model layer library for querying, storing, and caching data in frontend applications using reactive programming.","source":"@site/docs/command-model.md","sourceDirName":".","slug":"/command-model","permalink":"/documentation/docs/command-model","draft":false,"unlisted":false,"editUrl":"https://github.com/Reactive-Query-Lab/reactive-query/docs/command-model.md","tags":[],"version":"current","frontMatter":{"id":"2-command-model","title":"Command Model","sidebar_label":"Command Model","description":"A framework-agnostic MVVM Model layer library for querying, storing, and caching data in frontend applications using reactive programming.","slug":"/command-model"},"sidebar":"tutorialSidebar","previous":{"title":"Query Model","permalink":"/documentation/docs/query-model"},"next":{"title":"Examples","permalink":"/documentation/docs/examples"}}');var r=a(4848),o=a(8453);const s={id:"2-command-model",title:"Command Model",sidebar_label:"Command Model",description:"A framework-agnostic MVVM Model layer library for querying, storing, and caching data in frontend applications using reactive programming.",slug:"/command-model"},d=void 0,i={},m=[{value:"Understanding Mutate",id:"understanding-mutate",level:3},{value:"Store Architecture",id:"store-architecture",level:3},{value:"Parameter Management",id:"parameter-management",level:3},{value:"Store Extension",id:"store-extension",level:3},{value:"Command API Reference",id:"command-api-reference",level:3},{value:"Exported Types",id:"exported-types",level:4},{value:"Protected Methods (Can be overridden)",id:"protected-methods-can-be-overridden",level:4},{value:"Public Methods",id:"public-methods",level:4}];function c(e){const n={code:"code",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Command Models handle write operations (create, update, delete) and manage parameter state."}),"\n",(0,r.jsx)(n.h3,{id:"understanding-mutate",children:"Understanding Mutate"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"mutate"})," method is the core of Command Models. It handles write operations and manages the command lifecycle:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"class CreateUserCommandModel extends ReactiveCommandModel<CreateUserParams, User> {\n  async mutate(params: CreateUserParams): Promise<User> {\n    const response = await fetch('/api/users', {\n      method: 'POST',\n      body: JSON.stringify(params)\n    });\n    return response.json();\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"store-architecture",children:"Store Architecture"}),"\n",(0,r.jsx)(n.p,{children:"Unlike Query Models, Command Models use a single store instead of a vault because:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"No parameter-based caching"})," - Commands don't need to cache by parameters"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Single state management"})," - One set of parameters per command"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Immediate execution"})," - Commands execute immediately, not on demand"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Command store structure\n{\n  isLoading: boolean;\n  params: Partial<PARAMS>;\n  // ... extended store properties\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"parameter-management",children:"Parameter Management"}),"\n",(0,r.jsx)(n.p,{children:"Command Models provide built-in parameter management:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Get current parameters\nconst params = commandModel.getParams();\n\n// Update parameters\ncommandModel.updateModificationStore({ name: 'John', email: 'john@example.com' });\n\n// Get specific parameter\nconst name = commandModel.getModificationValueByKey('name');\n\n// Subscribe to parameter changes\ncommandModel.subscribeToParam().subscribe(({ params, isLoading }) => {\n  console.log('Parameters changed:', params);\n});\n"})}),"\n",(0,r.jsx)(n.h3,{id:"store-extension",children:"Store Extension"}),"\n",(0,r.jsx)(n.p,{children:"Command Models support extended stores and custom events:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"class ExtendedCommandModel extends ReactiveCommandModel<\n  UserParams,\n  User,\n  { validationErrors: string[] },\n  { onValidationError: (errors: string[]) => void }\n> {\n  protected initExtendedStore() {\n    return {\n      initExtendedStore: { validationErrors: [] },\n      extendedEvents: (store$) => ({\n        onValidationError: (errors: string[]) => {\n          store$.next({\n            ...store$.value,\n            validationErrors: errors\n          });\n        }\n      })\n    };\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"command-api-reference",children:"Command API Reference"}),"\n",(0,r.jsx)(n.h4,{id:"exported-types",children:"Exported Types"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Command response type\ntype CommandModelSubscribeResponse<PARAMS> = {\n  params: Partial<PARAMS>;\n  isLoading: boolean;\n};\n\n// Base command store\ntype BaseReactiveCommandStore<PARAMS, EXTENDED_STORE> = {\n  isLoading: boolean;\n  params: Partial<PARAMS>;\n} & EXTENDED_STORE;\n\n// Command store with events\ntype ReactiveCommandStore<PARAMS, EXTENDED_STORE, EXTENDED_EVENTS> = {\n  store$: BehaviorSubject<BaseReactiveCommandStore<PARAMS, EXTENDED_STORE>>;\n} & BaseReactiveCommandEvents<PARAMS, EXTENDED_STORE> & EXTENDED_EVENTS;\n"})}),"\n",(0,r.jsx)(n.h4,{id:"protected-methods-can-be-overridden",children:"Protected Methods (Can be overridden)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Override to implement your mutation logic\nabstract mutate(...args: any[]): Promise<RESPONSE>;\n\n// Override for initial parameters\ngetInitialParams(): PARAMS;\n\n// Override for extended store and events\nprotected initExtendedStore(): {\n  initExtendedStore?: EXTENDED_STORE;\n  extendedEvents?: (store$: BehaviorSubject<BaseReactiveCommandStore<PARAMS, EXTENDED_STORE>>) => EXTENDED_EVENTS;\n};\n"})}),"\n",(0,r.jsx)(n.h4,{id:"public-methods",children:"Public Methods"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Subscribe to store changes\nsubscribeToParam(): Observable<CommandModelSubscribeResponse<PARAMS>>;\n\n// Parameter management\ngetModificationValueByKey<T extends keyof PARAMS>(key: T): PARAMS[T] | undefined;\nupdateModificationStore(params: Partial<PARAMS>): void;\ngetParams(): PARAMS;\ngetStore(): BaseReactiveCommandStore<PARAMS, EXTENDED_STORE>;\n\n// State management\nupdateIsLoading(isLoading: boolean): void;\nresetStore(): void;\n"})})]})}function l(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>s,x:()=>d});var t=a(6540);const r={},o=t.createContext(r);function s(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);